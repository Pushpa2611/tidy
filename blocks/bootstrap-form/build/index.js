(()=>{"use strict";const e=window.wp.blocks,l=JSON.parse('{"apiVersion":2,"name":"tidy/bootstrap-form","title":"Bootstrap Form","category":"design","icon":"feedback","description":"A form block with submission tracking and file uploads.","attributes":{"formId":{"type":"string","default":""},"formClass":{"type":"string","default":""},"formMethod":{"type":"string","default":"post"},"fields":{"type":"array","default":[]},"submitText":{"type":"string","default":"Submit"},"successMessage":{"type":"string","default":"Thank you! Your submission has been received."}},"editorScript":"file:./build/index.js","editorStyle":"file:./editor.css","style":"file:./style.css","supports":{"html":false}}'),a=window.wp.blockEditor,s=window.wp.components,t=window.wp.element,r=window.ReactJSXRuntime,i=[{label:"Text",value:"text"},{label:"Email",value:"email"},{label:"Password",value:"password"},{label:"Textarea",value:"textarea"},{label:"Select",value:"select"},{label:"Checkbox",value:"checkbox"},{label:"Radio",value:"radio"},{label:"Range",value:"range"},{label:"File Upload",value:"file"}];(0,e.registerBlockType)(l.name,{...l,edit:function({attributes:e,setAttributes:l}){const{formId:n,formClass:o,formMethod:d,fields:c,submitText:m}=e,[p,u]=(0,t.useState)(null),x=(e,a,s)=>{const t=[...c];t[e]={...t[e],[a]:s},l({fields:t})},h=(e,a)=>{if(a<0||a>=c.length)return;const s=[...c],[t]=s.splice(e,1);s.splice(a,0,t),l({fields:s}),u(a)},b=(e,l)=>{const a=`${"checkbox"===e.type||"radio"===e.type?"form-check-input":(e.type,"form-control")} ${e.class||""}`.trim();switch(e.type){case"textarea":return(0,r.jsx)("textarea",{className:a,id:e.id,name:e.name,placeholder:e.placeholder,required:e.required,disabled:!0});case"select":return(0,r.jsx)("select",{className:a,id:e.id,name:e.name,required:e.required,disabled:!0,children:(e.options||"").split("\n").map(((e,l)=>{const[a,s]=e.includes(":")?e.split(":"):[e,e];return(0,r.jsx)("option",{value:a,children:s},l)}))});case"radio":case"checkbox":return(0,r.jsx)("div",{children:(e.options||e.label).split("\n").map(((l,s)=>{const[t,i]=l.includes(":")?l.split(":"):[l,l],n=`${e.id}_${s}`;return(0,r.jsxs)("div",{className:"form-check",children:[(0,r.jsx)("input",{type:e.type,className:a,id:n,name:e.name,value:t,disabled:!0}),(0,r.jsx)("label",{className:"form-check-label",htmlFor:n,children:i})]},s)}))});case"range":return(0,r.jsx)("input",{type:"range",className:`form-range ${e.class||""}`.trim(),id:e.id,name:e.name,required:e.required,disabled:!0});case"file":return(0,r.jsx)("input",{type:"file",className:a,id:e.id,name:e.name,required:e.required,disabled:!0});default:return(0,r.jsx)("input",{type:e.type,className:a,id:e.id,name:e.name,placeholder:e.placeholder,required:e.required,disabled:!0})}};return(0,r.jsxs)("div",{...(0,a.useBlockProps)(),children:[(0,r.jsxs)(a.InspectorControls,{children:[(0,r.jsxs)(s.PanelBody,{title:"Form Settings",children:[(0,r.jsx)(s.TextControl,{label:"Form ID",value:n,onChange:e=>l({formId:e})}),(0,r.jsx)(s.TextControl,{label:"Form Classes",value:o,onChange:e=>l({formClass:e}),placeholder:"space-separated classes"}),(0,r.jsx)(s.SelectControl,{label:"Form Method",value:d,options:[{label:"POST",value:"post"}],onChange:e=>l({formMethod:e})}),(0,r.jsx)(s.TextControl,{label:"Submit Button Text",value:m,onChange:e=>l({submitText:e})})]}),(0,r.jsxs)(s.PanelBody,{title:"Form Fields",children:[(0,r.jsx)(s.Button,{variant:"primary",onClick:()=>{const e=c.length+1,a={type:"text",label:`Field ${e}`,name:`field_${e}`,id:`field-${e}`,class:"form-control",placeholder:"",required:!1,options:""};l({fields:[...c,a]}),u(c.length)},style:{marginBottom:"16px"},children:"Add New Field"}),c.map(((e,a)=>(0,r.jsxs)(s.PanelBody,{title:e.label||`Field ${a+1}`,initialOpen:p===a,onToggle:()=>u(p===a?null:a),children:[(0,r.jsx)(s.SelectControl,{label:"Field Type",value:e.type,options:i,onChange:e=>x(a,"type",e)}),(0,r.jsx)(s.TextControl,{label:"Field Label",value:e.label,onChange:e=>x(a,"label",e)}),(0,r.jsx)(s.TextControl,{label:"Field Name",value:e.name,onChange:e=>x(a,"name",e)}),(0,r.jsx)(s.TextControl,{label:"Field ID",value:e.id,onChange:e=>x(a,"id",e)}),(0,r.jsx)(s.TextControl,{label:"Field Classes",value:e.class,onChange:e=>x(a,"class",e),placeholder:"form-control additional-class"}),"checkbox"!==e.type&&"radio"!==e.type&&"file"!==e.type&&(0,r.jsx)(s.TextControl,{label:"Placeholder",value:e.placeholder,onChange:e=>x(a,"placeholder",e)}),"select"===e.type&&(0,r.jsx)(s.TextareaControl,{label:"Options (one per line)",value:e.options,onChange:e=>x(a,"options",e),help:"Format: value:Label"}),(0,r.jsx)(s.ToggleControl,{label:"Required Field",checked:e.required,onChange:e=>x(a,"required",e)}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"16px",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,r.jsx)(s.Button,{isSmall:!0,variant:"secondary",disabled:0===a,onClick:()=>h(a,a-1),icon:"arrow-up-alt2",label:"Move Up"}),(0,r.jsx)(s.Button,{isSmall:!0,variant:"secondary",disabled:a===c.length-1,onClick:()=>h(a,a+1),icon:"arrow-down-alt2",label:"Move Down"})]}),(0,r.jsx)(s.Button,{isSmall:!0,isDestructive:!0,variant:"secondary",onClick:()=>(e=>{const a=c.filter(((l,a)=>a!==e));l({fields:a}),p>=e&&u(Math.max(0,p-1))})(a),icon:"trash",label:"Remove"})]})]},a)))]})]}),(0,r.jsxs)("form",{className:`${o}`.trim(),id:n,encType:"multipart/form-data",children:[c.map(((e,l)=>(0,r.jsxs)("div",{className:"mb-3",children:["checkbox"!==e.type&&"radio"!==e.type&&(0,r.jsxs)("label",{htmlFor:e.id,className:"form-label",children:[e.label,e.required&&(0,r.jsx)("span",{className:"text-danger",children:"*"})]}),b(e)]},l))),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:m})]})]})},save:function({attributes:e}){const{formId:l,formClass:s,formMethod:t,fields:i,submitText:n,successMessage:o}=e,d=a.useBlockProps.save(),c=e=>{const l=`${"checkbox"===e.type||"radio"===e.type?"form-check-input":"range"===e.type?"form-range":"form-control"} ${e.class||""}`.trim();switch(e.type){case"textarea":return(0,r.jsx)("textarea",{className:l,id:e.id,name:e.name,placeholder:e.placeholder||"",required:e.required});case"select":const a=e.options?e.options.split("\n").map((e=>{const[l,a]=e.includes(":")?e.split(":"):[e.trim(),e.trim()];return{value:l.trim(),label:a.trim()}})):[];return(0,r.jsxs)("select",{className:l,id:e.id,name:e.name,required:e.required,children:[(0,r.jsx)("option",{value:"",children:e.placeholder||"Select an option"}),a.map(((e,l)=>(0,r.jsx)("option",{value:e.value,children:e.label},l)))]});case"checkbox":case"radio":return(0,r.jsx)("div",{className:"form-check",children:(0,r.jsxs)("label",{className:"form-check-label",children:[(0,r.jsx)("input",{type:e.type,className:l,id:e.id,name:e.name,required:e.required}),e.label]})});case"range":return(0,r.jsx)("input",{type:"range",className:l,id:e.id,name:e.name,required:e.required});case"file":return(0,r.jsx)("input",{type:"file",className:l,id:e.id,name:e.name,required:e.required});default:return(0,r.jsx)("input",{type:e.type,className:l,id:e.id,name:e.name,placeholder:e.placeholder||"",required:e.required})}};return(0,r.jsx)("div",{...d,children:(0,r.jsxs)("form",{className:`tidy-form ${s||""}`.trim(),id:l,method:t,encType:"multipart/form-data","data-success-message":o,children:[(0,r.jsx)("input",{type:"hidden",name:"tidy_form_id",value:l}),(0,r.jsx)("input",{type:"hidden",name:"success_message",value:o}),i.map(((e,l)=>(0,r.jsxs)("div",{className:"mb-3",children:["checkbox"!==e.type&&"radio"!==e.type&&(0,r.jsxs)("label",{htmlFor:e.id,className:"form-label",children:[e.label,e.required&&(0,r.jsx)("span",{className:"text-danger",children:"*"})]}),c(e)]},l))),(0,r.jsx)("div",{className:"form-message",style:{display:"none"}}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:n})]})})}})})();